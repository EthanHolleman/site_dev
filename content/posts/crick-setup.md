---
title: "UC Davis HPC: Getting rolling with the good stuff"
date: 2021-07-02
tags: ["blogs", "IGG"]
draft: true
---

This guide is for anyone using a Mac or Linux machine that wants to get set up
on the UC Davis High Performance Computing (HPC) clusters Crick or Farm.
The first section walks you through creating an account and the second is
focused on how to install software that I find personally useful but is
completely optional.

## Background 

If you are not familiar with the command line or SSH this section may be worth
reading in order to starting talking to the cluster.

### The conversation format

For now, all your communication with the cluster will be through the terminal.
The cluster has no standard graphical interface like your local machine likely
does. The conversation between you and the cluster then looks you typing
a command into your terminal, and the cluster doing *exactly* what you told it 
to do. For beginners this is a key concept to understand. The command line is extremely powerful. 
This gives you the ability to do genomics scale work but with great power 
comes great responsibility. Some people will tell you to never run commands 
that you don't fully understand. This is an unrealistic expectation in my opinion 
but in generally by wary of commands with the following keywords.

- `rm`: This calls the program that deletes files. There is no trash bin and
        no second chances with this command. Be esspecially careful if you see
        `rm -f`. This `-f` is a flag (additional instruction) given to the
        `rm` program that forces deletion of protected files. 

- `mv`: This command moves files from one location to another. Not as dangerous
        as `rm` but can still mess things up pretty bad if you are not careful
        as you can accidentally overwrite files. 

### The communication method

In order to start using the Davis's HPC resources we need a way for your local
machine (what you are probably reading this guide on) to talk to the computers
that make up the cluster. To do this we will use a program called secure shell,
or SSH. This is the program that lets your local machine have a secure
conversation with the remote cluster via a command line interface.

If you are a Mac user you may need to enable SSH. Follow [this guide](https://support.apple.com/guide/mac-help/allow-a-remote-computer-to-access-your-mac-mchlp1066/mac)
provided by Apple. You can test to make sure SSH on your machine is good to
go by opening a terminal (spotlight search "terminal") and typing the command
`ssh`.


## Generate an SSH key

Step one to actually logging on to the remote cluster is to first generate
your SSH key. This special file will identify you as you during when talking
to the cluster and allow you access. The Davis HPC staff have already
[created this guide](https://wiki.cse.ucdavis.edu/support:general:security:ssh?&#generating_a_key_pair) on how to do this.

When generating the key you will be asked for a passphrase, I recommend just
hitting enter for no passphrase as it will make logging in faster and easer.

## Upload your public key

Next, you will upload the public key you just generated by completing
the account request form [at this link](https://wiki.cse.ucdavis.edu/cgi-bin/index2.pl) and follow the instructions there. It may take a day or two for your access to process, to speed things up it can
help to email `hpc-help@ucdavis.edu` and cc your PI and say you have uploaded
you SSH public key to the account request form and are wondering about approval
status.

## Access the cluster

Once you are approved (you may or may not get an email saying such) you can
access your account on the cluster you registered access to with the ssh
command below.

If you are accessing Farm

```
ssh yourusername@farm.cse.ucdavis.edu
```

If you are accessing Crick

```
ssh yourusername@farm.cse.ucdavis.edu
```

Your username (`yourusername`) should be your Davis CAS username. This may be
but is not necessary the same as your Davis email. This is the username you
use for access things like [myucdavis](https://my.ucdavis.edu) and the
[daily symptom survey](https://campusready.ucdavis.edu/symptom-survey).

### Troubleshooting

The HPC people have a pretty comprehensive [FAQ](https://hpc.ucdavis.edu/faq) which is worth checking out if you are having problems. If you are getting
error messages copy and paste those into Google and check the first StackOverflow
link that comes up.

## Additional resources

For a complete course that goes into detail on general command line usage,
workflows, software installation, SLURM and more see Shannon Joslin and 
Titus Brown's [freely available GGG298 course materials](https://github.com/ngs-docs/2021-GGG298). 

## Software installation

This section goes over how to install software that I think is well worth using
but in no way a requirement of using HPC resources.

### VS code

Microsoft's Visual Studio code is a widely used text editor for software
development. One extremely convient feature is it's capacity for remote
devlopment. Basically you can use its nice, pretty interface to talk to the
cluster instead of your basic terminal. This adds graphical file navigation,
previews and even drag and drop file uploads from your local machine. 



